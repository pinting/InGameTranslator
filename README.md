# InGameTranslator

<a href="https://www.youtube.com/watch?v=tOIljr3YTzo">
<img src="https://github.com/pinting/InGameTranslator/raw/master/screenshot.png" width="600" />
</a>

Watch a [recording](https://www.youtube.com/watch?v=tOIljr3YTzo) about the experiment!

Built using the following projects:
- <a href="https://github.com/techiew/DirectXHook">techiew/DirectXHook</a>
- <a href="https://github.com/JaidedAI/EasyOCR">JaidedAI/EasyOCR</a>
- <a href="https://github.com/nidhaloff/deep-translator">nidhaloff/deep-translator</a>

## How to

_Builds are available from `font.spritefont` and `d3d11.dll` in the `build` folder._

_(optional)_ Generate a new `spritefont` using [MakeSpriteFont](https://github.com/microsoft/DirectXTK/wiki/MakeSpriteFont). Extented ASCII can be generated by running:

```
MakeSpriteFont "Consolas" /characterregion:0x0-0xFF
/characterregion:0x192 /characterregion:0x393 /characterregion:0x398
/characterregion:0x3A3 /characterregion:0x3A6 /characterregion:0x3A9
/characterregion:0x3B1 /characterregion:0x3B4-0x3B5 /characterregion:0x3C0
/characterregion:0x3C3-0x3C6 /characterregion:0x207F /characterregion:0x20A7
/characterregion:0x2219 /characterregion:0x221A /characterregion:0x221E
/characterregion:0x2229 /characterregion:0x2248 /characterregion:0x2261
/characterregion:0x2264-0x2265 /characterregion:0x2310 /characterregion:0x2320
/characterregion:0x2321 /characterregion:0x2500 /characterregion:0x2502
/characterregion:0x250C /characterregion:0x2510 /characterregion:0x2514
/characterregion:0x2518 /characterregion:0x251C /characterregion:0x2524
/characterregion:0x252C /characterregion:0x2534 /characterregion:0x253C
/characterregion:0x2550-0x256C /characterregion:0x2580 /characterregion:0x2584
/characterregion:0x2588 /characterregion:0x258C /characterregion:0x2590-0x2593
/characterregion:0x25A0 font.spritefont
```

_(optional)_ Build the DirectX hook. In the `DirectXHook` directory, using `Visual Studio 2022 Developer Command Prompt v17.10.3` (or newer), execute `MSBuild -t:restore,build /p:Configuration=Release /p:RestorePackagesConfig=true`. Copy the `d3d11.dll` next to a DX11 or DX12 application.

To run the server, have Python `3.10.12` (or newer), install the dependencies by running `pip install -r requirements.txt` in the `Server` directory, launch the server with `python server.py`. WSL is supported with [GPU acceleration configured](https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html). Have the latest Nvidia driver on the host!

Use the key `G` to make a new scan than press it again to hide the overlay. Use the key `H` to switch between source text and translation. Limitation: slow speed! A couple of seconds computation time is needed between scans.

In the top left corner the current status of the hook is displayed. `R` means READY to capture. `D` means the the processing was DONE. `...` means there is an ongoing operation.

## Contribution

Feel free to contribute.

## License

All Rights Reserved.

Copyright (c) 2024 DÃ©nes Tornyi.